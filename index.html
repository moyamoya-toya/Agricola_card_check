<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アグリコラ カードリスト</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 各テーブルコンテナのスクロールを有効にするためのスタイル */
        .table-container-scrollable {
            max-height: 400px; /* 必要に応じて高さを調整してください */
            overflow-y: auto;
            border-radius: 0.5rem; /* rounded-lg */
            border: 1px solid #e5e7eb; /* gray-200 */
        }
        /* テーブルヘッダーがスクロールしても固定されるようにする */
        .table-container-scrollable thead th {
            position: sticky;
            top: 0;
            background-color: #f9fafb; /* bg-gray-50 */
            z-index: 10;
        }
        /* 効果のセル内のテキストが折り返されるようにする */
        .wrap-text {
            white-space: normal;
        }
        /* 非表示にする列のスタイル */
        .hidden-column {
            display: none;
        }
        /* ボタンのスタイル */
        .toggle-button {
            @apply px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-150 ease-in-out shadow-md;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-7xl">
        <h1 class="text-4xl font-bold text-gray-800 mb-6 text-center">アグリコラ 全カードリスト</h1>

        <div class="flex justify-center mb-6 gap-4">
            <button id="toggle-details-button" class="toggle-button">詳細を表示/非表示</button>
        </div>

        <div class="flex flex-col md:flex-row gap-8">
            <div class="card-section flex-1">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4 text-center">小進歩カード</h2>
                <div class="table-container-scrollable shadow-sm">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">名称</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">効果</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">評価点</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">種類</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">評価</th>
                            </tr>
                        </thead>
                        <tbody id="small-improvement-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>
            </div>

            <div class="card-section flex-1">
                <h2 class="text-2xl font-semibold text-gray-700 mb-4 text-center">職業カード</h2>
                <div class="table-container-scrollable shadow-sm">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">名称</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">効果</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">評価点</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">種類</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden-column detail-column">評価</th>
                            </tr>
                        </thead>
                        <tbody id="job-card-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Small Improvement Card CSV data
        const smallImprovementCsvText = `ID,名称,効果,評価点,小進歩,強すぎるカード
A014,大工の金鎚,同時に2部屋以上建設するたびに、資材の合計から葦2と、木/レンガ/石の家ならば木材2/レンガ3/石材4安くなる。,9.5,小進歩,強すぎるカード
A033,新しい土地,まだ始まっていないラウンド1つにつき、すぐに食料2と1点ボーナスを得る。,7.83,小進歩,強すぎるカード
A039,礼拝所,このカードは全員が使えるアクションスペースとなる。ここを使ったプレイヤーはボーナス3点を得る。ほかのプレイヤーが使うときは、まずあなたに小麦1を渡さなければならない。,9.5,小進歩,強すぎるカード
A048,削り馬,木材1以上を入庫する（ストックに入れる）たびに、その後あなたのストックに木材5以上あれば木材1を食料3に交換できる。木材7以上あれば必ず交換しなければならない。,9,小進歩,強すぎるカード
A082,労働証明書,アクションスペースを使うたびに、その後で建設資材が4つ以上ある建設資材の累積スペース1か所から建設資材を1つ取れる。,7.5,小進歩,強すぎるカード
B010,移動住宅,このカードが家族1人分の住む場所となる。,9.83,小進歩,強すぎるカード
B015,工作台,木材の累積スペースを使うたび、その直後にそこで得た木材（だけ）を使って牧場を1つだけ建設できる。そうしたらなら、柵1本分は無料となる。,9.5,小進歩,強すぎるカード
B021,干し草倉,このカード上に食料4を置く。小麦1以上を入庫する(ストックに入れる)たびに、追加でカード上の食料1を得る。食料がなくなり次第、「家族を増やす。住む場所がなくてもよい」アクションを得る。,9.5,小進歩,強すぎるカード
B022,旅行靴,すぐに食料2を得る。すぐにあなたのストックにある人物1人を配置する。次の帰宅フェイズにその配置した人物をゲームから取り除く。,7,小進歩,強すぎるカード
C003,馬車旅行,このカードを労働フェイズ中に出したなら、すぐに他の人物1人を配置する。このカードは自分の前に置かず、左隣のプレイヤーの手札に入れる。,8.67,小進歩,強すぎるカード
C012,牛牧場,このカードの上を、牛を飼う場所にできる。収容数は農場の牧場1つにつき牛1頭。,4,小進歩,弱すぎるカード
C028,教師机,アクションスペース「大きい進歩」または「家の建て直し」を使うたび、食料1のコストで職業1を出すことができる。,9.5,小進歩,強すぎるカード
C031,書斎,得点計算時に、マイナス点の合計と等しい数のボーナス点を得る。（ただし最大7点まで）。,9,小進歩,強すぎるカード
C063,クラフトビール醸造所,各収穫の食料供給フェイズで、このカードを使って自分のストックの小麦1と畑の小麦1をボーナス2点と食料4に交換できる。,9.5,小進歩,強すぎるカード
C084,ライ麦飼料,収穫で終わらない各ラウンドで、小麦1を払うことで家畜ちょうど1種類を繁殖できる。（これは繁殖フェイズとは見なさない）,4.67,小進歩,弱すぎるカード
D004,横挽きの木材,すぐに、自分のストックの石材と同数の木材を得る。このカードは自分の前に置かず、左隣のプレイヤーの手札に入れる。,9.17,小進歩,強すぎるカード
D019,粉砕鋤,レンガの累積スペースを使用するたび、その直後にレンガ1を払って畑1を耕せる。そうするなら、支払ったレンガをその累積スペースに置く。,9.5,小進歩,強すぎるカード
D021,男児求む,家に空き部屋があるなら、「小さい進歩」アクションを得るたび、代わりに「家族を増やす」アクションを行える。,7.5,小進歩,強すぎるカード
D033,避暑地の別荘,得点計算時、石の家に住んでいれば、家と縦横に隣接する未使用スペースそれぞれにつきボーナス2点を得る。（未使用スペースのマイナス点は通常通り。）,9.5,小進歩,強すぎるカード
D074,王家の木材,アクションスペース「農場拡充」を使用するか、進歩を建設した手番の終わりに、それらのアクションで支払った木材2につき木材1を得る（切り捨て）。,8.5,小進歩,強すぎるカード
E022,客室,すぐにあなたの所有する食料を好きな数だけこのカードの上に置く。各ラウンドに1度、このカードの上の食料1を捨てることで、あなたのストックにある人物を1人配置できる。,7.5,小進歩,強すぎるカード`;

        // Job Card CSV data
        const jobCardCsvText = `ID,名称,効果,評価点,種類,評価
A097,新入生,1手番につき1回までと、各収穫につき1回まで、「パンを焼く」アクションのたびに、そのアクションの代わりに、職業コストなしで職業を1枚出せる。,8.5,職業,強すぎるカード
A100,後見人,各ラウンドの帰宅フェイズに人物3人以上を累積スペースから戻すたびに、食料1を払えばボーナス1点を得る。,7,職業,弱すぎるカード
A107,待ち構え,建設資材がちょうど5/4/3ある建設資材の累積スペースを、あなたのそのラウンドの1/2/3番目の人物で使うたびに食料1を得る。,1,職業,弱すぎるカード
A131,工芸指南,大きい進歩の「家具製作所」か「製陶所」か「カゴ製作所」を建設するたびに、職業を2枚まで職業コストなしで出せる。,9,職業,強すぎるカード
A133,ほら吹き,得点計算のとき、自分の前に進歩カードが5/6/7/8/9/10枚あれば、2/3/4/5/7/9点ボーナスを得る。,10,職業,強すぎるカード
A144,係争物取り扱い人,このカードの上に葦3とレンガ4を置く。次に牧場3/畑タイル5を達成したプレイヤーはカードに置いた葦3/レンガ4を得る。（さかのぼって適用しない）,2,職業,弱すぎるカード
A151,吟遊楽人,各帰宅フェイズのはじめに、ラウンド1から4のアクションスペースカードが1か所だけ空いていればその効果を得られる。（これは人物を配置せず、「アクションスペースを使う」とはみなさない）,3.33,職業,弱すぎるカード
A154,主計官,ほかのプレイヤーが食料の累積スペースを使うたびに、そのプレイヤーにあなたのストックから小麦1を渡せばボーナス1点を得る。,2.83,職業,弱すぎるカード
A167,種畜買い付け人,木/レンガ/石の部屋を1部屋以上建設して、同じ手番中に厩も1軒以上建設するたびに、追加で羊/猪/牛を1得る。,3,職業,弱すぎるカード
B101,建具大工,各収穫で、（あなたを含む）いずれかのプレイヤーが「家具製作所」かその改良進歩を持っていれば、あなたは食料2でボーナス1点だけ購入できる。,5,職業,弱すぎるカード
B117,情報屋,このカードを出したとき、すぐに木材1を得る。各労働フェイズの後で、あなたのストックの石材がレンガより多ければ、木材1を得る。,9.33,職業,強すぎるカード
B132,地主,未使用の農場スペースが無くなり次第、収穫する野菜1つにつきボーナス1点を得る。,9.5,職業,強すぎるカード
B139,森林科学者,各ラウンドの帰宅フェイズにゲームボード上に木材が1つも残っていなければ、食料1を得る。ラウンド5からは代わりに食料2を得る。,3.17,職業,弱すぎるカード
B147,緑衣の狩人,木材の累積スペースを使うたびに、その後で小麦1を払えば猪1を得る。,1.5,職業,弱すぎるカード
B151,小百姓,このカードを出したときすぐに石材1を得る。ちょうど2部屋の木の家に住んでいる限り、（「集会所」を除く）アクションスペースはすべて、占有されていないものとして扱う。,7.83,職業,強すぎるカード
B161,軟弱者,労働フェイズであなたの手番のたびに、品物5以上の累積スペースが1か所以上あるのに、それらを使わなければ野菜1を得る。,8.5,職業,強すぎるカード
C099,ガーデンデザイナー,得点計算の開始時に、空いている畑に好きな数の食料を置くことができる。食料1/4/7がある畑1つにつきボーナス1/2/3点を得る。,10,職業,強すぎるカード
C102,森林保護者,木材の累積スペースを使うたび、その後で自分のストックからそのスペースに木材4を置くことで、石材2とレンガ1と葦1と小麦1を得ることができる。,8.5,職業,強すぎるカード
C125,夜間労働者,各労働フェイズの開始前、自分のストックにない建設資材の累積スペースに人物1を置くことができる。（その後、スタートプレイヤーからゲームを続ける。）,8,職業,強すぎるカード
C154,双子の研究者,ちょうど同じ数の品物がある同じ種類の品物の累積スペース2つのうち1つを使用するたび、食料1を払うことでボーナス1点も購入できる。,4.5,職業,弱すぎるカード
C157,資源分析者,各ラウンドの開始前、あなたの所有する建築資材2種類以上が他の全てのプレイヤーより多ければ、食料1を得る。,2.5,職業,弱すぎるカード
C158,森林活動家,あなたが人物を置く前、累積スペースに木材が合計8以上ある場合、そのたびに食料1を得る。,4.5,職業,弱すぎるカード
D092,児童相談員,ラウンド5以降、家に空き部屋があれば、人物のアクションの終わりに、その人物で「家族を増やす」アクションを行える。そうするなら、マイナス2点を得る。,7,職業,強すぎるカード
D097,無心する学生,このカードを出したとき、すぐに物乞い1を得る。収穫のはじめに職業コストを支払うことなく職業1を出してもよい。,9.33,職業,強すぎるカード
D101,菓子職人,アクションスペース「穀物活用」を使用するたび、その後に食料1を支払ってボーナス1点を購入できる。その食料はそのアクションスペースに置く。（に使用したプレイヤーが得る。）,4.5,職業,弱すぎるカード
D116,樹木検査人,このカードはあなただけが使える累積スペース「木材1」である。アクションスペースカード「石切り場」が新たに公開されるたび、このカードの上の木材を全て捨てなければならない。,5.17,職業,弱すぎるカード
D137,交易教師,アクションスペース「授業」を使用するたび、その後で異なる種類の建設資材を2つまで購入できる。小麦、石材、羊、猪は食料1。牛と野菜は食料2必要。,9.5,職業,強すぎるカード
D140,大口叩き,累積スペースから、建設資材を4つ以上取るか、家畜を4頭以上取るたび、追加で食料1を得る。,1.33,職業,弱すぎるカード
D165,猪追い,家畜の累積スペースを使用するたび、そのスペースの上下に隣接するアクションスペースをあなたが占有しているなら、追加で猪1を得る。,3.5,職業,弱すぎるカード
E108,ブラックベリー農家,柵を建設するたびに、建設した柵の本数まで、残りのラウンドのラウンドスペースに食料1ずつを置く。各ラウンドのはじめに、その食料を得る。,5,職業,弱すぎるカード`;

        /**
         * Parses CSV text and appends table rows to the specified tbody.
         * @param {string} csvText - The CSV data to display.
         * @param {string} targetBodyId - The ID of the tbody element where data will be appended.
         */
        function displayCsv(csvText, targetBodyId) {
            const cardListBody = document.getElementById(targetBodyId);
            const rows = csvText.split('\n');
            const dataRows = rows.slice(1); // Skip header row

            dataRows.forEach(row => {
                // Parse each CSV row (considering commas within double quotes)
                const columns = row.match(/(?:^|,)(?:"(?:[^"]|"")*"|[^,]*)/g);

                if (columns && columns.length >= 6) { // Check if expected number of columns exist
                    const tr = document.createElement('tr');
                    tr.className = 'hover:bg-gray-50';

                    const cleanColumns = columns.map(col => {
                        let cleaned = col.startsWith(',') ? col.substring(1) : col;
                        if (cleaned.startsWith('"') && cleaned.endsWith('"')) {
                            cleaned = cleaned.substring(1, cleaned.length - 1).replace(/""/g, '"');
                        }
                        return cleaned;
                    });

                    const id = cleanColumns[0];
                    const name = cleanColumns[1];
                    const effect = cleanColumns[2];
                    const rating = cleanColumns[3];
                    const type = cleanColumns[4]; // Type (Small Improvement / Job)
                    const evaluation = cleanColumns[5]; // Evaluation (Too Strong / Too Weak)

                    // Create and append each cell
                    const tdId = document.createElement('td');
                    tdId.className = 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900';
                    tdId.textContent = id;
                    tr.appendChild(tdId);

                    const tdName = document.createElement('td');
                    // 名称の列はテキストを折り返すように変更
                    tdName.className = 'px-6 py-4 text-sm text-gray-900 wrap-text';
                    tdName.textContent = name;
                    tr.appendChild(tdName);

                    const tdEffect = document.createElement('td');
                    // 効果の文字サイズを小さくし、テキストを折り返すように設定
                    tdEffect.className = 'px-6 py-4 text-xs text-gray-500 wrap-text';
                    tdEffect.textContent = effect;
                    tr.appendChild(tdEffect);

                    const tdRating = document.createElement('td');
                    // デフォルトで非表示にする
                    tdRating.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden-column detail-column';
                    tdRating.textContent = rating;
                    tr.appendChild(tdRating);

                    const tdType = document.createElement('td');
                    // デフォルトで非表示にする
                    tdType.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden-column detail-column';
                    tdType.textContent = type;
                    tr.appendChild(tdType);

                    const tdEvaluation = document.createElement('td');
                    // デフォルトで非表示にする
                    tdEvaluation.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden-column detail-column';
                    tdEvaluation.textContent = evaluation;
                    tr.appendChild(tdEvaluation);

                    cardListBody.appendChild(tr);
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Display Small Improvement Cards
            displayCsv(smallImprovementCsvText, 'small-improvement-body');
            // Display Job Cards
            displayCsv(jobCardCsvText, 'job-card-body');

            const toggleButton = document.getElementById('toggle-details-button');
            toggleButton.addEventListener('click', () => {
                const detailColumns = document.querySelectorAll('.detail-column');
                detailColumns.forEach(col => {
                    col.classList.toggle('hidden-column');
                });
            });
        });
    </script>
</body>
</html>
